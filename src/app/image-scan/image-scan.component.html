<body>
    <div class="row">
    <!-- Show image larger and Zoom function -->
        <div class="col-md-5 col-lg-5 col-xs-12">
            <form [formGroup]="form" (submit)="onSubmit()" class="form">
                <input 
                    #myInput
                    *ngIf = "largeImage"
                    class="file"
                    type="file" 
                    name="file" 
                    id="file" 
                    (change)="onFileChange($event)" 
                    formControlName="files" 
                    accept=".png, .jpg, .jpeg, .pdf" width="50%"
                >
                <input 
                    #myInput
                    *ngIf = "duplicate_browse"
                    class="file"
                    type="file" 
                    name="file" 
                    id="file" 
                    (change)="onFileChange($event)" 
                    formControlName="files" 
                    accept=".png, .jpg, .jpeg, .pdf" width="50%"
                    disabled
                >
            </form>
            <div *ngIf = "zoom" class="zoom">
                <img src={{image_view}} alt="" id={{i}} class="ZoomImage img-responsive" style="display: inline-block;position: relative;">
                <span aria-hidden="true" class="zoomCloseIcon" id={{i}} (click) = "onZoomOut(i,$event)" style="cursor: pointer;">×</span>
            </div>
            <div class="image" id="image" [style.display]="zoom ? 'none' : 'inline-block'">
                <img class="large_image img-responsive" src={{image_view}} style="display: inline-block;position: relative;">
                <i-bs 
                    name="zoom-in"
                    *ngIf = "zoomIcon"
                    width="40"
                    height="40" style="cursor: pointer;" (click)= "onClickZoom()"  class="zoomInIcon">
                </i-bs>
            </div>
        </div>
    <!-- Show list of images -->
        <div class="col-md-2 col-lg-2  col-xs-12 smallScanCard" style="margin-top: -16px;">
            <button class="btn btn-secondary btnAlign btn-md" (click) ="new()" disabled>Scan</button>
            <button class="btn btn-primary btnAlign btn-md" (click) = "onReset()">Reset</button>
            <div class="image-container card1" id="image1">
                <div *ngFor="let item of base64textString;let i = index" style="display: inline-block;position: relative;">
                    <img class="scanImage"  id = {{i}} src={{item}} alt="" (click) = "onClick($event)">
                    <button type="button" class="close" aria-label="Close">
                        <span aria-hidden="true" class="closeIcon" id= {{i}} (click)="removeSelectedFile(i,$event)" *ngIf = "closeIcon">×</span>
                    </button>
                </div>
            </div>
        </div>
    <!-- Report type dropdown and displaying result -->
        <div class="mt-2 col-md-5 col-lg-5 ml-3 col-xs-12">
            <span>Operations Succeeded&nbsp;&nbsp;<span class="border rounded p-2">{{successCount}}</span></span>&nbsp;&nbsp;&nbsp;
            <span style="margin-left: 45px;">Operations Failed&nbsp;&nbsp;<span class="border rounded p-2">{{failedCount}}</span></span>
            <div>
                <form [formGroup]="form" (submit)="onSubmit()" class="mt-3">
                    <label for="">Select Report Type</label>&nbsp;&nbsp;
                    <select formControlName="select" class="form-control w-auto" (change)="selectId($event)">
                        <option>Select Document</option>
                        <option *ngFor="let listOfDocument of listOfDocuments">{{listOfDocument}}</option>
                    </select> 
                    <button 
                        *ngIf = "!uploadButton"
                        class="btn btn-primary upload" 
                        [disabled]='disabledupload===true' 
                        type="submit" 
                        style="margin-top: 10px;margin-left: 26px;">Upload
                    </button>
                    <button *ngIf = "responseButton" class="btn btn-primary ml-2" type="button"  nbButton
                        status="primary" >    
                    <countdown [config]="{leftTime: 15, format: 's'}"></countdown>&nbsp;&nbsp;Estimated time
                    </button>
                    <div class="form-inline mb-2" style="margin-left: 144px;">
                        <input type="text" class="form-control" placeholder="Enter Report ID" *ngIf = "newDocumentInput" (change) = "onChangeReport($event)">
                    </div>  
                    <div *ngIf = "error" class="alert alert-danger alert-dismissible fade show" role="alert" style="margin-top: 10px;">
                        Server can't respond please contact your admin
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="text-center m-4">
                        <div *ngIf='isLoading' class="spinner-border text-success text-center" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>   
                    <div *ngIf = "f.select.touched && f.select.invalid"  class="alert alert-danger alert-dismissible fade show" role="alert" style="margin-top: 10px;">
                        Document ID Required
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div *ngIf = "uploadFileAlert"  class="alert alert-danger alert-dismissible fade show" role="alert" style="margin-top: 10px;">
                        Please select file to upload
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div *ngIf = "DropdownId"  class="alert alert-danger alert-dismissible fade show" role="alert" style="margin-top: 10px;">
                        Please select document ID
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                </form>
            </div>
            <div class="scrollit" id="result">
                <form class="form-inline edit_form" *ngIf = "inputEnable" [formGroup]="form" (submit)="changeEdit()">
                    <div class="form-group mx-sm-3 mb-2">
                      <input type="text"  class="form-control edit_input" value={{res}} (change)= "onEditData($event)">
                    </div>
                    <button type="submit" class="btn btn-primary mb-2 save_button">Update</button>
                    <button type="submit" class="btn btn-primary mb-2 save_button">Discard</button>
                </form>
                <div class=table-wrapper>
                <table class="table table-hover table-striped tableScroll" style="overflow-y: auto;">
                    <tbody style="overflow-y: auto;">
                    <tr>
                        <th></th>
                        <td></td>
                        <th>Confidence (%)</th>
                    </tr>
                    <tr>
                        <th class="w-25">Name of the scan centre</th>
                        <td class="w-50" id='scan_center_name' (click) = "onEdit($event)">{{result.scan_center_name[0]}}</td>
                        <td class="w-25 text-center">{{result.scan_center_name[1]}}</td>
                    </tr>
                    <tr>
                        <th class="w-25">Name of the consultant</th>
                        <td class="w-50" id='Patient_Name' (click) = "onEdit($event)">{{result.Patient_Name[0]}}</td> 
                        <td class="w-25 text-center">{{result.Patient_Name[1]}}</td> 
                    </tr>
                    <tr>
                        <th class="w-25">Report Type</th>
                        <td class="w-50" id='report_type' (click) = "onEdit($event)">{{result.report_type[0]}}</td>
                        <td class="w-25 text-center">{{result.report_type[1]}}</td>
                    </tr>
                    <tr>
                        <th class="w-25">Report Date</th>
                        <td class="w-50" id='Date' (click) = "onEdit($event)">{{result.Date[0]}}</td>
                        <td class="w-25 text-center">{{result.Date[1]}}</td>
                    </tr>
                    <tr>
                        <th class="w-25">Impression</th>
                        <td class="w-50" id='Impression' (click) = "onEdit($event)">{{result.Impression[0]}}</td>
                        <td class="w-25 text-center">{{result.Impression[1]}}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            </div>
            <button 
            class="btn btn-primary" 
            type="submit" 
            (click)="onSubmitImage()" 
            style="margin-right: 10px;"
            [disabled] = "!markForReview">Mark for Review</button>
            <button 
            class="btn btn-primary" 
            type="submit" 
            (click)="onSubmitText()"
            [disabled] = "!getResult">Update Database</button>
            <div *ngIf="successAlert" class="alert alert-success alert-dismissible fade show" role="alert" style="margin-top: 10px;">
                Data strored Successfully!!
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div *ngIf = "errorAlert" class="alert alert-danger alert-dismissible fade show" role="alert" style="margin-top: 10px;">
            <strong>Error!</strong> Please try again
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        </div>
    </div>
</body>